(function(){var a='xtal-state-watch';if(!customElements.get(a)){var b='watch',c=[],d=history.pushState,e=d.bind(history);history.pushState=function(a,b,d){e(a,b,d),c.forEach(function(b){b.history=a})};var f=history.replaceState,g=f.bind(history);history.replaceState=function(a,b,d){g(a,b,d),c.forEach(function(b){b.history=a})},window.addEventListener('popstate',function(){c.forEach(function(a){a.history=history.state})});var h=function(a){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,a),babelHelpers.createClass(c,[{key:'notify',value:function(a){a||(a=history.state);var b=new CustomEvent('history-changed',{detail:{value:window.history.state},bubbles:!0,composed:!1});this.dispatchEvent(b)}},{key:'_upgradeProperty',value:function(a){if(this.hasOwnProperty(a)){var b=this[a];delete this[a],this[a]=b}}},{key:'attributeChangedCallback',value:function(a,c,d){a===b?(this._watch=null!==d,this._watch&&this.notify()):void 0}},{key:'connectedCallback',value:function(){this._upgradeProperty('watch')}},{key:'history',get:function(){return window.history.state},set:function(a){this.watch&&this.notify(a)}},{key:'watch',get:function(){return this._watch},set:function(a){a?this.setAttribute(b,''):this.removeAttribute(b)}}]),c}(HTMLElement);customElements.define(a,h)}})();